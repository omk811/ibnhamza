<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏุฑุณ ุฅุซุจุงุช ูุญุฐู ููุฒุฉ ุงุจู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .arabic-text {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        .rule-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .exercise-card {
            transition: all 0.3s ease;
        }
        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-full">
    <header class="bg-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-3xl font-bold text-center text-gray-800">๐ ุฏุฑุณ ุฅุซุจุงุช ูุญุฐู ููุฒุฉ "ุงุจู"</h1>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">
        <!-- ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ -->
        <section class="mb-12">
            <div class="rule-box text-white rounded-xl p-8 shadow-xl">
                <h2 class="text-2xl font-bold mb-6 text-center">๐ ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white bg-opacity-20 rounded-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-yellow-200">โ ุชูุญุฐู ููุฒุฉ "ุจู - ุจูุช" ูู:</h3>
                        <ul class="arabic-text space-y-3">
                            <li class="flex items-start">
                                <span class="text-yellow-300 ml-2">โข</span>
                                ุฅุฐุง ููุนุช ุจูู ุงุณููู ุนููููุ ููู ุชูุน ูู ุจุฏุงูุฉ ุงูุณุทุฑ
                            </li>
                            <li class="flex items-start">
                                <span class="text-yellow-300 ml-2">โข</span>
                                ุฅุฐุง ุฏุฎู ุนูููุง ูุฏุงุก
                            </li>
                        </ul>
                        <div class="mt-4 p-3 bg-green-500 bg-opacity-30 rounded">
                            <p class="font-bold">ุฃูุซูุฉ:</p>
                            <p>ูุญูุฏ ุจู ุฃุญูุฏ - ูุงุทูุฉ ุจูุช ุนูู - ูุง ุจู ุงููุฑูู</p>
                        </div>
                    </div>

                    <div class="bg-white bg-opacity-20 rounded-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-green-200">โ ุชูุซุจุช ููุฒุฉ "ุงุจู - ุงุจูุฉ" ูู:</h3>
                        <ul class="arabic-text space-y-3">
                            <li class="flex items-start">
                                <span class="text-green-300 ml-2">โข</span>
                                ุฅุฐุง ูู ุชูุน ุจูู ุงุณููู ุนูููู
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-300 ml-2">โข</span>
                                ุฅุฐุง ููุนุช ูู ุฃูู ุงูุณุทุฑ
                            </li>
                        </ul>
                        <div class="mt-4 p-3 bg-blue-500 bg-opacity-30 rounded">
                            <p class="font-bold">ุฃูุซูุฉ:</p>
                            <p>ุญุณุงู ุงุจู ููุณ ุญุงุฏ - ุงุจูุฉ ุนูู - ุงุจู ุฎูุฏูู (ุฃูู ุงูุณุทุฑ)</p>
                            <p class="text-sm mt-1 text-blue-100">* ุงูุญุณุงู: ุงูุณูู</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ุดุฑูุท ุงูุชูุฏู -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-medium text-gray-700">ุงูุชูุฏู ูู ุงูุชุฏุฑูุจุงุช</span>
                <span class="text-sm font-medium text-gray-700" id="progress-text">0 / 0</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div class="progress-bar bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full" style="width: 0%" id="progress-bar"></div>
            </div>
        </div>

        <!-- ุงูุชุฏุฑูุจุงุช -->
        <section id="exercises-section">
            <h2 class="text-2xl font-bold text-center mb-8 text-gray-800">๐ฏ ุงูุชุฏุฑูุจุงุช ุงูุชุทุจูููุฉ</h2>
            <div id="exercises-container"></div>
        </section>

        <!-- ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ -->
        <div id="final-results" class="hidden mt-12 p-8 bg-white rounded-xl shadow-xl text-center">
            <h3 class="text-2xl font-bold mb-4">๐ ุชูุงูููุง! ุฃูููุช ุฌููุน ุงูุชุฏุฑูุจุงุช</h3>
            <div id="final-score" class="text-xl mb-6"></div>
            <button onclick="restartExercises()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold transition-colors">
                ุฅุนุงุฏุฉ ุงูุชุฏุฑูุจุงุช
            </button>
        </div>
    </main>

    <script>
        const exercises = [
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ุนูุฑ ... ุงูุฎุทุงุจ ุฑุถู ุงููู ุนูู',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู (ุนูุฑ - ุงูุฎุทุงุจ)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ูุง ... ุงููุฑููุ ุชุนุงู ููุง',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก (ูุง)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: '... ุณููุง ุนุงูู ูุดููุฑ',
                options: ['ุจู', 'ุงุจู'],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ูุฃููุง ููุนุช ูู ุฃูู ุงูุณุทุฑ'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ุญุณุงู ... ููุณ ุญุงุฏ',
                options: ['ุจู', 'ุงุจู'],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ูุฃููุง ูู ุชูุน ุจูู ุงุณููู ุนูููู (ุญุณุงู ุงุณู ููุณูู ูููุณ ุนูู ุดุฎุต)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ุฃุญูุฏ ... ูุญูุฏ ุทุงูุจ ูุฌุชูุฏ',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู (ุฃุญูุฏ - ูุญูุฏ)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: '... ุฌุงุฑูุง ูุทูุน ููุงูุฏูู',
                options: ['ุจู', 'ุงุจู'],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ูุฃููุง ูู ุชูุน ุจูู ุงุณููู ุนูููู'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ูุง ... ุนููุ ููู ุญุงููุ',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก (ูุง)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ุฎุงูุฏ ... ุณุนุฏ ูุตู ูุชุฃุฎุฑุงู',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู (ุฎุงูุฏ - ุณุนุฏ)'
            },
            {
                type: 'analysis',
                question: 'ุญูู ุงูุฌููุฉ ุงูุชุงููุฉ ูุงุฎุชุฑ ุงูุณุจุจ ุงูุตุญูุญ ููุชุงุจุฉ "ุจู" ุจุฏูู ููุฒุฉ:',
                text: 'ุฒูุฏ ุจู ุซุงุจุช ูุงุชุจ ุงููุญู',
                options: [
                    'ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู',
                    'ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก',
                    'ูุฃููุง ููุนุช ูู ุฃูู ุงูุณุทุฑ',
                    'ูุฃููุง ูู ุชูุน ุจูู ุงุณููู ุนูููู'
                ],
                correct: 0,
                explanation: 'ุงูุณุจุจ ุงูุตุญูุญ: ููุนุช ุจูู ุงุณููู ุนูููู (ุฒูุฏ - ุซุงุจุช) ูุชูุญุฐู ุงูููุฒุฉ'
            },
            {
                type: 'analysis',
                question: 'ุญูู ุงูุฌููุฉ ุงูุชุงููุฉ ูุงุฎุชุฑ ุงูุณุจุจ ุงูุตุญูุญ ููุชุงุจุฉ "ุงุจู" ุจุงูููุฒุฉ:',
                text: 'ุฑุฃูุช ุงุจู ุงููุฏูุฑ ูู ุงููุฏุฑุณุฉ',
                options: [
                    'ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู',
                    'ูุฃููุง ูู ุชูุน ุจูู ุงุณููู ุนูููู',
                    'ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก',
                    'ูุฃููุง ููุนุช ูู ุฃูู ุงูุณุทุฑ'
                ],
                correct: 1,
                explanation: 'ุงูุณุจุจ ุงูุตุญูุญ: ูู ุชูุน ุจูู ุงุณููู ุนูููู (ุงููุฏูุฑ ููุณ ุนูู ุดุฎุต) ูุชูุซุจุช ุงูููุฒุฉ'
            },
            {
                type: 'comparison',
                question: 'ูุงุฑู ุจูู ุงูุฌููุชูู ูุงุฎุชุฑ ุงููุฑู ุงูุตุญูุญ:',
                text: 'ุงูุฌููุฉ ุงูุฃููู: ูุญูุฏ ุจู ุณุงูู\nุงูุฌููุฉ ุงูุซุงููุฉ: ุงุจู ุณุงูู ุทุงูุจ',
                options: [
                    'ุงูุฃููู ุจูู ุนููููุ ุงูุซุงููุฉ ููุณุช ุจูู ุนูููู',
                    'ุงูุฃููู ูู ุงููุฏุงุกุ ุงูุซุงููุฉ ููุณุช ูู ุงููุฏุงุก',
                    'ุงูุฃููู ูู ุฃูู ุงูุณุทุฑุ ุงูุซุงููุฉ ููุณุช ูู ุฃูู ุงูุณุทุฑ',
                    'ูุง ููุฌุฏ ูุฑู ุจููููุง'
                ],
                correct: 0,
                explanation: 'ูู ุงูุฃููู ููุนุช ุจูู ุนูููู (ูุญูุฏ-ุณุงูู) ูุญูุฐูุชุ ูู ุงูุซุงููุฉ ูู ุชูุน ุจูู ุนูููู ูุฃูุซุจุชุช'
            },
            {
                type: 'application',
                question: 'ุทุจู ุงููุงุนุฏุฉ ุนูู ุงูุฌููุฉ ุงูุชุงููุฉ:',
                text: 'ูุงู ุงููุนูู: ูุง ... ุฃุญูุฏุ ุงูุฑุฃ ุงูุฏุฑุณ',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก (ูุง) - ูุฐุง ุชุทุจูู ูุจุงุดุฑ ูููุงุนุฏุฉ'
            },
            {
                type: 'tricky',
                question: 'ุณุคุงู ุฏููู: ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ ูู ูุฐุง ุงูุณูุงู:',
                text: 'ูุฑุฃุช ุนู ุนูุฑู ... ุงูุนุงุต ูู ูุชุงุจ ุงูุชุงุฑูุฎ',
                options: ['ุจู', 'ุงุจู'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ุฑุบู ูุฌูุฏ "ุนู" ูุจููุงุ ูุฃู ุงููุงุนุฏุฉ ุชูุธุฑ ููููุนูุง ุจูู ุนูููู (ุนูุฑู - ุงูุนุงุต)'
            },
            {
                type: 'multiple',
                question: 'ุงุฎุชุฑ ุฌููุน ุงูุฌูู ุงูุชู ุชูุญุฐู ูููุง ููุฒุฉ "ุงุจู":',
                options: [
                    'ุนูู ุจู ุฃุจู ุทุงูุจ',
                    'ูุง ุจู ุงููุฑูู',
                    'ุงุจู ุงูุทุจูุจ ูุฑูุถ',
                    'ุณุนุฏ ุจู ูุนุงุฐ'
                ],
                correct: [0, 1, 3],
                explanation: 'ุชูุญุฐู ูู ุงูุฌูู ุงูุฃููู ูุงูุซุงููุฉ ูุงูุฑุงุจุนุฉ (ุจูู ุนูููู ุฃู ุจุนุฏ ูุฏุงุก)'
            },
            {
                type: 'multiple',
                question: 'ุงุฎุชุฑ ุฌููุน ุงูุฌูู ุงูุชู ุชูุซุจุช ูููุง ููุฒุฉ "ุงุจู":',
                options: [
                    'ุงุจู ุฎูุฏูู ูุคุฑุฎ ุนุธูู',
                    'ูุญูุฏ ุจู ุฑุงุดุฏ',
                    'ูุฐุง ุงุจู ุฌุงุฑู',
                    'ูุง ุจู ุนูู'
                ],
                correct: [0, 2],
                explanation: 'ุชูุซุจุช ูู ุงูุฌููุฉ ุงูุฃููู (ุฃูู ุงูุณุทุฑ) ูุงูุซุงูุซุฉ (ููุณุช ุจูู ุนูููู)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ูุงุทูุฉ ... ุฒูุงุฏ ุทุงูุจุฉ ูุชูููุฉ',
                options: ['ุจูุช', 'ุงุจูุฉ'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ููุนุช ุจูู ุงุณููู ุนูููู (ูุงุทูุฉ - ุฒูุงุฏ)'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: '... ุนูู ูุงุฏูุฉ ุบุฏุงู',
                options: ['ุจูุช', 'ุงุจูุฉ'],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ูุฃููุง ูู ุชูุน ุจูู ุงุณููู ุนูููู'
            },
            {
                type: 'choice',
                question: 'ุงุฎุชุฑ ุงููุชุงุจุฉ ุงูุตุญูุญุฉ:',
                text: 'ูุง ... ุงููุฑููุฉุ ุงูุชุฑุจู',
                options: ['ุจูุช', 'ุงุจูุฉ'],
                correct: 0,
                explanation: 'ุชูุญุฐู ุงูููุฒุฉ ูุฃููุง ุฏุฎู ุนูููุง ูุฏุงุก (ูุง)'
            },
            {
                type: 'contextual',
                question: 'ูู ุฃู ูู ุงูุณูุงูุงุช ุงูุชุงููุฉ ุชููุชุจ "ุงุจู" ุจุงูููุฒุฉุ',
                text: 'ุงุฎุชุฑ ุงูุณูุงู ุงูุตุญูุญ:',
                options: [
                    'ุนูุฏูุง ุชูุน ุจูู ุงุณููู ุนูููู',
                    'ุนูุฏูุง ุชูุน ูู ุจุฏุงูุฉ ุงูุฌููุฉ ุฃู ุงูุณุทุฑ',
                    'ุนูุฏูุง ูุฏุฎู ุนูููุง ูุฏุงุก',
                    'ุนูุฏูุง ุชุฃุชู ุจุนุฏ ุญุฑู ุฌุฑ'
                ],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ุนูุฏูุง ุชูุน ูู ุจุฏุงูุฉ ุงูุฌููุฉ ุฃู ุงูุณุทุฑุ ุญุชู ูู ูุงูุช ุจูู ุนูููู'
            },
            {
                type: 'error_detection',
                question: 'ุงูุชุดู ุงูุฎุทุฃ ูู ุงูุฌููุฉ ุงูุชุงููุฉ:',
                text: 'ุงูุชููุช ุจู ุงุจู ุฎุงูุฏ ูู ุงูุณูู',
                options: [
                    'ูุฌุจ ูุชุงุจุชูุง "ุจู ุฎุงูุฏ"',
                    'ุงููุชุงุจุฉ ุตุญูุญุฉ ููุง ูู',
                    'ูุฌุจ ุฅุถุงูุฉ ููุฒุฉ ูุตู',
                    'ูุฌุจ ุญุฐู ุญุฑู ุงูุฌุฑ'
                ],
                correct: 1,
                explanation: 'ุงููุชุงุจุฉ ุตุญูุญุฉ ูุฃู "ุงุจู" ูู ุชูุน ุจูู ุงุณููู ุนูููู (ุฎุงูุฏ ูุญุฏู ููุณ ูุงููุงู)'
            },
            {
                type: 'advanced',
                question: 'ุณุคุงู ูุชูุฏู: ุฃูููุง ุตุญูุญ ูู ูุฐุง ุงูุณูุงูุ',
                text: 'ูุชุจ ุงูุดุงุนุฑ: "ุฃูุง ... ุงูุตุญุฑุงุกุ ุนุงุดู ุงูุญุฑูุฉ"',
                options: ['ุจู', 'ุงุจู'],
                correct: 1,
                explanation: 'ุชูุซุจุช ุงูููุฒุฉ ูุฃู "ุงูุตุญุฑุงุก" ููุณ ุงุณู ุนูู ุดุฎุตุ ุจู ุงุณู ููุงู ูุฌุงุฒู ูู ุงูุณูุงู ุงูุดุนุฑู'
            }
        ];

        let currentExercise = 0;
        let score = 0;
        let userAnswers = [];

        function getExerciseTypeLabel(type) {
            const labels = {
                'choice': 'ุงุฎุชูุงุฑ ูุงุญุฏ',
                'multiple': 'ุงุฎุชูุงุฑ ูุชุนุฏุฏ',
                'analysis': 'ุชุญููู ุงููุงุนุฏุฉ',
                'comparison': 'ููุงุฑูุฉ',
                'application': 'ุชุทุจูู',
                'tricky': 'ุณุคุงู ุฏููู',
                'contextual': 'ููู ุงูุณูุงู',
                'error_detection': 'ุงูุชุดุงู ุงูุฎุทุฃ',
                'advanced': 'ูุชูุฏู'
            };
            return labels[type] || 'ุชุฏุฑูุจ';
        }

        function initializeExercises() {
            currentExercise = 0;
            score = 0;
            userAnswers = [];
            document.getElementById('final-results').classList.add('hidden');
            updateProgress();
            showExercise();
        }

        function updateProgress() {
            const progress = (currentExercise / exercises.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentExercise} / ${exercises.length}`;
        }

        function showExercise() {
            if (currentExercise >= exercises.length) {
                showFinalResults();
                return;
            }

            const exercise = exercises[currentExercise];
            const container = document.getElementById('exercises-container');
            
            let html = `
                <div class="exercise-card bg-white rounded-xl shadow-lg p-8 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">ุงูุณุคุงู ${currentExercise + 1}</h3>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            ${getExerciseTypeLabel(exercise.type)}
                        </span>
                    </div>
                    
                    <p class="arabic-text text-lg mb-6 text-gray-700">${exercise.question}</p>
                    ${exercise.type === 'multiple' ? '<p class="text-sm text-blue-600 mb-4 font-medium">๐ ููููู ุงุฎุชูุงุฑ ุฃูุซุฑ ูู ุฅุฌุงุจุฉ ูุงุญุฏุฉ</p>' : ''}
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <p class="arabic-text text-xl font-bold text-center">${exercise.text}</p>
                    </div>
                    
                    <div class="space-y-3 mb-6" id="options-container">
            `;

            exercise.options.forEach((option, index) => {
                const inputType = exercise.type === 'multiple' ? 'checkbox' : 'radio';
                html += `
                    <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                        <input type="${inputType}" name="answer" value="${index}" class="ml-3 text-blue-600">
                        <span class="arabic-text text-lg">${option}</span>
                    </label>
                `;
            });

            html += `
                    </div>
                    
                    <div class="flex justify-center">
                        <button onclick="checkAnswer()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold transition-colors">
                            ุชุญูู ูู ุงูุฅุฌุงุจุฉ
                        </button>
                    </div>
                    
                    <div id="result-container" class="hidden mt-6"></div>
                </div>
            `;

            container.innerHTML = html;
        }

        function checkAnswer() {
            const exercise = exercises[currentExercise];
            const selectedInputs = document.querySelectorAll('input[name="answer"]:checked');
            const selectedValues = Array.from(selectedInputs).map(input => parseInt(input.value));
            
            // ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุฅุฌุงุจุฉ
            if (selectedValues.length === 0) {
                showMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุฅุฌุงุจุฉ ูุจู ุงููุชุงุจุนุฉ', 'warning');
                return;
            }
            
            let isCorrect = false;
            
            if (exercise.type === 'multiple') {
                isCorrect = selectedValues.length === exercise.correct.length && 
                           selectedValues.every(val => exercise.correct.includes(val)) &&
                           exercise.correct.every(val => selectedValues.includes(val));
            } else {
                isCorrect = selectedValues.length === 1 && selectedValues[0] === exercise.correct;
            }

            userAnswers.push({
                question: currentExercise,
                selected: selectedValues,
                correct: isCorrect
            });

            if (isCorrect) {
                score++;
            }

            showResult(isCorrect, exercise.explanation);
        }

        function showResult(isCorrect, explanation) {
            const resultContainer = document.getElementById('result-container');
            const className = isCorrect ? 'correct' : 'incorrect';
            const icon = isCorrect ? 'โ' : 'โ';
            const message = isCorrect ? 'ุฅุฌุงุจุฉ ุตุญูุญุฉ!' : 'ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ';
            
            resultContainer.innerHTML = `
                <div class="${className} p-4 rounded-lg border-2">
                    <p class="font-bold text-lg mb-2">${icon} ${message}</p>
                    <p class="arabic-text">${explanation}</p>
                    <button onclick="nextExercise()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-bold transition-colors">
                        ุงูุณุคุงู ุงูุชุงูู
                    </button>
                </div>
            `;
            
            resultContainer.classList.remove('hidden');
            
            // ุชุนุทูู ุงูุฎูุงุฑุงุช
            document.querySelectorAll('input[name="answer"]').forEach(input => {
                input.disabled = true;
            });
            document.querySelector('button[onclick="checkAnswer()"]').style.display = 'none';
        }

        function nextExercise() {
            currentExercise++;
            updateProgress();
            showExercise();
        }

        function showFinalResults() {
            const percentage = Math.round((score / exercises.length) * 100);
            let message = '';
            let emoji = '';
            
            if (percentage >= 90) {
                message = 'ููุชุงุฒ ุฌุฏุงู! ุฃุชููุช ุงููุงุนุฏุฉ ุจุดูู ุฑุงุฆุน';
                emoji = '๐';
            } else if (percentage >= 80) {
                message = 'ุฌูุฏ ุฌุฏุงู! ุชุญุชุงุฌ ููุฑุงุฌุนุฉ ุจุณูุทุฉ';
                emoji = '๐ฅ';
            } else if (percentage >= 70) {
                message = 'ุฌูุฏ! ุชุญุชุงุฌ ููุฒูุฏ ูู ุงูุชุฏุฑูุจ';
                emoji = '๐ฅ';
            } else {
                message = 'ุชุญุชุงุฌ ููุฑุงุฌุนุฉ ุงููุงุนุฏุฉ ูุงููุฒูุฏ ูู ุงูุชุฏุฑูุจ';
                emoji = '๐';
            }

            document.getElementById('final-score').innerHTML = `
                <div class="text-4xl mb-4">${emoji}</div>
                <div class="text-2xl font-bold text-gray-800 mb-2">ุงููุชูุฌุฉ: ${score} ูู ${exercises.length}</div>
                <div class="text-xl text-gray-600 mb-4">ุงููุณุจุฉ ุงููุฆููุฉ: ${percentage}%</div>
                <div class="text-lg text-gray-700">${message}</div>
            `;
            
            document.getElementById('final-results').classList.remove('hidden');
            document.getElementById('exercises-container').innerHTML = '';
        }

        function showMessage(message, type = 'info') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'warning' ? 'bg-yellow-100 border-yellow-400 text-yellow-800' : 
                type === 'error' ? 'bg-red-100 border-red-400 text-red-800' : 
                'bg-blue-100 border-blue-400 text-blue-800'
            } border-2`;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        function restartExercises() {
            initializeExercises();
        }

        // ุชุดุบูู ุงูุชุฏุฑูุจุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.onload = function() {
            initializeExercises();
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'991ad120262ef9d7',t:'MTc2MDk4NzQ0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
